<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™‚äº‹äººç”Ÿ V5.0ï¼šå¯Œè±ªåœ–é‘‘</title>
    <style>
        :root { --bg: #121212; --card: #1e1e1e; --accent: #bb86fc; --text: #e0e0e0; --green: #03dac6; --red: #cf6679; --gold: #ffd700; }
        body { font-family: 'å¾®è»Ÿæ­£é»‘é«”', sans-serif; background: var(--bg); color: var(--text); max-width: 600px; margin: 0 auto; padding-bottom: 80px; user-select: none; }
        
        /* é ‚éƒ¨ç‹€æ…‹åˆ— */
        .header { background: #2c2c2c; padding: 10px 15px; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 8px rgba(0,0,0,0.6); }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 5px; font-size: 0.9em; text-align: center; }
        .big-stat { font-size: 1.2em; font-weight: bold; color: var(--gold); grid-column: span 3; margin-bottom: 5px; }
        
        /* åœ–ç‰‡å®¹å™¨ */
        .img-banner { width: 100%; height: 150px; object-fit: cover; border-radius: 8px 8px 0 0; display: block; }
        .item-img { width: 60px; height: 60px; object-fit: cover; border-radius: 8px; margin-right: 10px; }

        /* å¡ç‰‡èˆ‡åˆ—è¡¨ */
        .card { background: var(--card); border-radius: 10px; margin: 15px 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.3); overflow: hidden; }
        .card-body { padding: 15px; }
        .card h3 { margin-top: 0; color: var(--accent); border-bottom: 1px solid #333; padding-bottom: 10px; }

        /* æŒ‰éˆ•èˆ‡äº’å‹• */
        .btn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        button { background: #333; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; transition: 0.2s; font-size: 1em; }
        button:hover { background: #444; filter: brightness(1.2); }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-buy { background: var(--green); color: black; font-weight: bold; }
        .btn-risk { background: var(--red); color: white; }

        /* åº•éƒ¨å°èˆª */
        .nav-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: #000; display: flex; justify-content: space-around; padding: 10px 0; border-top: 1px solid #333; }
        .nav-item { color: #888; cursor: pointer; text-align: center; font-size: 0.8em; }
        .nav-item.active { color: var(--accent); font-weight: bold; }
        .nav-icon { display: block; font-size: 1.5em; margin-bottom: 2px; }

        /* é é¢åˆ‡æ› */
        .page { display: none; animation: fadeIn 0.3s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* ç´€éŒ„å€ */
        .log-box { height: 120px; overflow-y: auto; background: #111; padding: 10px; border-radius: 5px; font-size: 0.9em; color: #ccc; }
        .log-new { color: var(--gold); }
    </style>
</head>
<body>

    <div class="header">
        <div class="stat-grid">
            <div class="big-stat" id="money-display">$0</div>
            <div>ğŸ“… <span id="year">2025</span> (<span id="age">0</span>æ­²)</div>
            <div>â¤ï¸ <span id="health">100</span></div>
            <div>ğŸ˜Š <span id="happy">80</span></div>
        </div>
    </div>

    <div id="page-home" class="page active">
        <div class="card">
            <img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=600&q=80" class="img-banner">
            <div class="card-body">
                <h3>ğŸ“ å¹´åº¦è¡Œå‹•</h3>
                <div class="btn-grid">
                    <button onclick="action('work')">ğŸ’¼ å·¥ä½œè³ºéŒ¢</button>
                    <button onclick="action('study')">ğŸ“š é€²ä¿®æ™ºåŠ›</button>
                    <button onclick="action('play')">ğŸ® ç©æ¨‚æ”¾é¬†</button>
                    <button onclick="action('gym')">ğŸ‹ï¸ å¥èº«é‹å‹•</button>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-body">
                <h3>ğŸ“œ äººç”Ÿè·‘é¦¬ç‡ˆ</h3>
                <div id="game-log" class="log-box"></div>
                <button onclick="nextYear()" style="width:100%; margin-top:10px; background:var(--accent); color:black; font-weight:bold;">ğŸ‚ ä¸‹ä¸€æ­² (çµç®—)</button>
            </div>
        </div>
    </div>

    <div id="page-assets" class="page">
        <div class="card">
            <div class="card-body">
                <h3>ğŸï¸ è±ªè»Šå±•å”®ä¸­å¿ƒ</h3>
                <div id="car-shop"></div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <h3>ğŸ˜ï¸ æˆ¿ç”¢ä»²ä»‹</h3>
                <div id="house-shop"></div>
            </div>
        </div>
    </div>

    <div id="page-casino" class="page">
        <div class="card">
            <img src="https://images.unsplash.com/photo-1596838132731-3301c3fd4317?w=600&q=80" class="img-banner">
            <div class="card-body">
                <h3>ğŸ° çš‡å®¶è³­å ´</h3>
                <p>è¦å‰‡ï¼šæ¯”å¤§å°ã€‚è´äº†ç¿»å€ï¼Œè¼¸äº†æ²’æ”¶ã€‚</p>
                <div style="display:flex; gap:10px; margin-bottom:10px;">
                    <input type="number" id="bet-amount" placeholder="ä¸‹æ³¨é‡‘é¡" style="width:100%; padding:10px; border-radius:5px; border:none;">
                </div>
                <div class="btn-grid">
                    <button class="btn-risk" onclick="gamble('big')">ğŸ² æŠ¼å¤§ (5-9)</button>
                    <button class="btn-risk" onclick="gamble('small')">ğŸ² æŠ¼å° (0-4)</button>
                </div>
                <p id="casino-msg" style="text-align:center; color:var(--gold); margin-top:10px; height:20px;"></p>
            </div>
        </div>
    </div>

    <div id="page-profile" class="page">
        <div class="card">
            <div class="card-body">
                <h3>ğŸ† æˆå°±çç›ƒ</h3>
                <div id="achievement-list"></div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <h3>ğŸ“Š è©³ç´°è³‡æ–™</h3>
                <p>è·æ¥­: <span id="job-title">ç„¡æ¥­</span></p>
                <p>æ™ºåŠ›: <span id="intel">0</span></p>
                <p>é­…åŠ›: <span id="charm">0</span></p>
                <button onclick="restartGame()" style="width:100%; background:#444; margin-top:10px;">ğŸ”„ åˆªé™¤å­˜æª”é‡æ–°é–‹å§‹</button>
            </div>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" onclick="nav('home')"><span class="nav-icon">ğŸ </span>ç”Ÿæ´»</div>
        <div class="nav-item" onclick="nav('assets')"><span class="nav-icon">ğŸï¸</span>è³‡ç”¢</div>
        <div class="nav-item" onclick="nav('casino')"><span class="nav-icon">ğŸ°</span>è³­å ´</div>
        <div class="nav-item" onclick="nav('profile')"><span class="nav-icon">ğŸ†</span>æˆå°±</div>
    </div>

    <script>
        // --- éŠæˆ²æ•¸æ“šåº« ---
        const Cars = [
            { id: 'toyota', name: "åœ‹ç”¢ä»£æ­¥è»Š", price: 600000, charm: 2, img: "https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?w=100" },
            { id: 'tesla', name: "ç‰¹æ–¯æ‹‰ Model 3", price: 1800000, charm: 10, img: "https://images.unsplash.com/photo-1560958089-b8a1929cea89?w=100" },
            { id: 'porsche', name: "ä¿æ™‚æ· 911", price: 6000000, charm: 30, img: "https://images.unsplash.com/photo-1503376763036-066120622c74?w=100" },
            { id: 'ferrari', name: "æ³•æ‹‰åˆ© F8", price: 15000000, charm: 60, img: "https://images.unsplash.com/photo-1583121274602-3e2820c698d2?w=100" }
        ];

        const Houses = [
            { id: 'apt', name: "å–®èº«å…¬å¯“", price: 3000000, happy: 2, img: "https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=100" },
            { id: 'mansion', name: "å¸‚ä¸­å¿ƒè±ªå®…", price: 20000000, happy: 10, img: "https://images.unsplash.com/photo-1600596542815-22b5c03295b6?w=100" },
            { id: 'villa', name: "ç§äººæµ·æ™¯åˆ¥å¢…", price: 100000000, happy: 30, img: "https://images.unsplash.com/photo-1613490493576-7fde63acd811?w=100" }
        ];

        let Game = {
            age: 18, money: 5000, health: 100, happy: 80, intel: 40, charm: 30,
            inventory: [], // å­˜æ”¾è²·éçš„æ±è¥¿ ID
            achievements: []
        };

        // --- æ ¸å¿ƒåŠŸèƒ½ ---
        function init() {
            renderShop();
            updateUI();
            log("æ­¡è¿ä¾†åˆ° V5.0 å¯Œè±ªåœ–é‘‘ï¼ä½ çš„ç›®æ¨™æ˜¯æ”¶é›†æ‰€æœ‰è±ªè»Šã€‚");
        }

        function nav(page) {
            document.querySelectorAll('.page').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById('page-' + page).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function updateUI() {
            ['age', 'health', 'happy', 'intel', 'charm'].forEach(k => {
                let el = document.getElementById(k);
                if(el) el.innerText = Game[k];
            });
            document.getElementById('money-display').innerText = "$" + Game.money.toLocaleString();
            
            checkAchievements();
        }

        function log(msg) {
            let box = document.getElementById('game-log');
            box.innerHTML = `<div style="margin-bottom:5px; border-bottom:1px solid #333; padding-bottom:2px;"><span style="color:#888">[${Game.age}æ­²]</span> ${msg}</div>` + box.innerHTML;
        }

        // --- éŠæˆ²è¡Œå‹• ---
        function action(type) {
            if(Game.health <= 0) return alert("ä½ å·²ç¶“æ›äº†...");

            if(type === 'work') {
                let base = 25000 + (Game.intel * 500);
                Game.money += base;
                Game.health -= 3;
                Game.happy -= 5;
                log(`ğŸ’¼ å·¥ä½œè³ºäº† $${base.toLocaleString()}`);
            } else if(type === 'study') {
                Game.intel += 3;
                Game.money -= 1000;
                log("ğŸ“š é€²ä¿®èª²ç¨‹ï¼Œæ™ºåŠ› +3 (èŠ±è²» $1,000)");
            } else if(type === 'play') {
                Game.happy += 10;
                Game.money -= 3000;
                log("ğŸ® ç›¡æƒ…ç©æ¨‚ï¼Œå¿«æ¨‚ +10 (èŠ±è²» $3,000)");
            } else if(type === 'gym') {
                Game.health += 4;
                Game.charm += 2;
                Game.money -= 500;
                log("ğŸ‹ï¸ å¥èº«é›ç…‰ï¼Œå¥åº·+4 é­…åŠ›+2");
            }
            limitStat();
            updateUI();
        }

        function nextYear() {
            if(Game.health <= 0) return;

            Game.age++;
            // è‡ªç„¶æ¶ˆè€—
            Game.health -= 2;
            Game.happy -= 2;
            
            // è³‡ç”¢åŠ æˆ
            let carBonus = 0;
            let houseBonus = 0;
            Game.inventory.forEach(id => {
                let car = Cars.find(c => c.id === id);
                if(car) carBonus += car.charm;
                let house = Houses.find(h => h.id === id);
                if(house) houseBonus += house.happy;
            });

            if(carBonus > 0) log(`ğŸï¸ ä½ çš„è±ªè»Šè®“ä½ å€æ„Ÿè‡ªä¿¡ (é­…åŠ› +${carBonus})`);
            if(houseBonus > 0) log(`ğŸ  ä½åœ¨è±ªå®…è£¡çœŸèˆ’æœ (å¿«æ¨‚ +${houseBonus})`);
            
            Game.charm += carBonus;
            Game.happy += houseBonus;

            // éš¨æ©Ÿäº‹ä»¶
            if(Math.random() < 0.1) {
                let lost = Math.floor(Game.money * 0.1);
                Game.money -= lost;
                log(`ğŸ“‰ é‡åˆ°è©é¨™é›†åœ˜ï¼Œæå¤±äº† $${lost.toLocaleString()}`);
            }

            if(Game.age >= 100) log("ğŸ‚ æ­å–œä½ æ´»åˆ°äº† 100 æ­²ï¼äººç‘æˆå°±é”æˆï¼");
            if(Game.health <= 0) log("ğŸ’€ ä½ çš„ç”Ÿå‘½èµ°åˆ°äº†ç›¡é ­...");

            limitStat();
            updateUI();
        }

        // --- å•†åº—ç³»çµ± ---
        function renderShop() {
            let carHtml = "";
            Cars.forEach(c => {
                carHtml += `
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; border-bottom:1px solid #333; padding-bottom:5px;">
                    <div style="display:flex; align-items:center;">
                        <img src="${c.img}" class="item-img">
                        <div>
                            <div style="font-weight:bold">${c.name}</div>
                            <div style="font-size:0.8em; color:#888">é­…åŠ› +${c.charm}</div>
                        </div>
                    </div>
                    <button class="btn-buy" onclick="buy('car', '${c.id}')">$${c.price/10000}è¬</button>
                </div>`;
            });
            document.getElementById('car-shop').innerHTML = carHtml;

            let houseHtml = "";
            Houses.forEach(h => {
                houseHtml += `
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; border-bottom:1px solid #333; padding-bottom:5px;">
                    <div style="display:flex; align-items:center;">
                        <img src="${h.img}" class="item-img">
                        <div>
                            <div style="font-weight:bold">${h.name}</div>
                            <div style="font-size:0.8em; color:#888">å¿«æ¨‚ +${h.happy}/å¹´</div>
                        </div>
                    </div>
                    <button class="btn-buy" onclick="buy('house', '${h.id}')">$${h.price/10000}è¬</button>
                </div>`;
            });
            document.getElementById('house-shop').innerHTML = houseHtml;
        }

        function buy(type, id) {
            let item = type === 'car' ? Cars.find(c => c.id === id) : Houses.find(h => h.id === id);
            if(Game.inventory.includes(id)) return alert("ä½ å·²ç¶“æ“æœ‰é€™å€‹äº†ï¼");
            
            if(Game.money >= item.price) {
                Game.money -= item.price;
                Game.inventory.push(id);
                log(`ğŸ‰ æ­å–œå…¥æ‰‹ï¼ä½ è²·ä¸‹äº† ${item.name}`);
                updateUI();
            } else {
                alert("ç¾é‡‘ä¸è¶³ï¼");
            }
        }

        // --- è³­å ´ç³»çµ± ---
        function gamble(choice) {
            let input = document.getElementById('bet-amount');
            let amount = parseInt(input.value);
            if(!amount || amount <= 0) return alert("è«‹è¼¸å…¥æœ‰æ•ˆé‡‘é¡");
            if(amount > Game.money) return alert("ä½ çš„éŒ¢ä¸å¤ ï¼");

            let dice = Math.floor(Math.random() * 10); // 0-9
            let result = dice >= 5 ? 'big' : 'small';
            let msg = document.getElementById('casino-msg');

            if(choice === result) {
                Game.money += amount;
                msg.innerText = `ğŸ² é–‹å‡º ${dice} (${result})ï¼ä½ è´äº† $${amount}`;
                msg.style.color = "#03dac6";
                log(`ğŸ° è³­å ´å¤§å‹ï¼è´å¾— $${amount}`);
            } else {
                Game.money -= amount;
                msg.innerText = `ğŸ² é–‹å‡º ${dice} (${result})ï¼ä½ è¼¸äº†...`;
                msg.style.color = "#cf6679";
                log(`ğŸ’¸ è³­å ´å¤±åˆ©ï¼Œè¼¸æ‰ $${amount}`);
            }
            updateUI();
        }

        // --- æˆå°±ç³»çµ± ---
        function checkAchievements() {
            const list = [
                { id: 'rich', name: "ç¬¬ä¸€æ¡¶é‡‘", desc: "è³‡ç”¢è¶…é 100 è¬", check: () => Game.money >= 1000000 },
                { id: 'tycoon', name: "å„„è¬å¯Œç¿", desc: "è³‡ç”¢è¶…é 1 å„„", check: () => Game.money >= 100000000 },
                { id: 'old', name: "é•·å‘½ç™¾æ­²", desc: "æ´»åˆ° 100 æ­²", check: () => Game.age >= 100 },
                { id: 'car_king', name: "è»Šç¥", desc: "æ“æœ‰æ³•æ‹‰åˆ©", check: () => Game.inventory.includes('ferrari') }
            ];

            let html = "";
            list.forEach(ach => {
                let unlocked = Game.achievements.includes(ach.id) || ach.check();
                if(unlocked && !Game.achievements.includes(ach.id)) {
                    Game.achievements.push(ach.id);
                    alert(`ğŸ† è§£é–æˆå°±ï¼š${ach.name}ï¼`);
                }
                
                html += `
                <div style="background:${unlocked ? '#333' : '#111'}; color:${unlocked ? '#ffd700' : '#555'}; padding:8px; margin-bottom:5px; border-radius:5px;">
                    <b>${unlocked ? 'ğŸ†' : 'ğŸ”’'} ${ach.name}</b>
                    <div style="font-size:0.8em">${ach.desc}</div>
                </div>`;
            });
            document.getElementById('achievement-list').innerHTML = html;
        }

        function limitStat() {
            Game.health = Math.min(100, Math.max(0, Game.health));
            Game.happy = Math.min(100, Math.max(0, Game.happy));
            Game.charm = Math.min(100, Game.charm);
            Game.intel = Math.min(100, Game.intel);
        }

        function restartGame() {
            if(confirm("ç¢ºå®šè¦åˆªé™¤é€²åº¦é‡ä¾†å—ï¼Ÿ")) location.reload();
        }

        init();
    </script>
</body>
</html>